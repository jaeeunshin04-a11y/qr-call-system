<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QR í˜¸ì¶œ ì‹œìŠ¤í…œ</title>
  <style>
    body {
      font-family: "Noto Sans KR", sans-serif;
      background-color: #f7f8fa;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }

    h1 {
      color: #2c3e50;
      font-size: 1.8rem;
      margin-bottom: 10px;
    }

    #patient-id {
      font-size: 1.2rem;
      color: #555;
      margin-bottom: 25px;
    }

    .button-container {
      display: grid;
      grid-template-columns: repeat(2, 130px);
      gap: 15px;
    }

    button {
      background-color: #4e73df;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 15px;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    button:hover {
      background-color: #2e59d9;
    }
  </style>
</head>

<body>
  <h1>ê°„í˜¸ ìš”ì²­ ì‹œìŠ¤í…œ</h1>
  <p id="patient-id"></p>

  <div class="button-container">
    <button onclick="sendRequest('ë¬¼')">ğŸ’§ ë¬¼</button>
    <button onclick="sendRequest('í™”ì¥ì‹¤')">ğŸš» í™”ì¥ì‹¤</button>
    <button onclick="sendRequest('ì²´ìœ„ ë³€ê²½')">ğŸ”„ ì²´ìœ„ ë³€ê²½</button>
    <button onclick="sendRequest('í†µì¦/ì•½')">ğŸ’Š í†µì¦/ì•½</button>
    <button onclick="sendRequest('ê¸°íƒ€')">ğŸ“ ê¸°íƒ€</button>
  </div>

  <script>
    // âœ… Google Apps Script ì›¹ì•± ì£¼ì†Œ (ë³¸ì¸ URLë¡œ êµì²´ ê°€ëŠ¥)
    const scriptURL = "https://script.google.com/macros/s/AKfycbzsvOUnOnN4-dwA5-0HGjeU_MHHoUnN9-uKEEl3x7c6bNMDW8H_J1WYvPOs2ZF0AyQq/exec";

    // âœ… URLì—ì„œ ?id=1002 ì´ëŸ° ì‹ìœ¼ë¡œ í™˜ì ID ì½ê¸°
    const params = new URLSearchParams(window.location.search);
    const patientId = params.get("id");

    // âœ… í™”ë©´ì— í™˜ì ë“±ë¡ë²ˆí˜¸ í‘œì‹œ
    const patientText = document.getElementById("patient-id");
    if (patientId) {
      patientText.textContent = `í™˜ì ë“±ë¡ë²ˆí˜¸: ${patientId}`;
    } else {
      patientText.textContent = `í™˜ì ë“±ë¡ë²ˆí˜¸ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`;
    }

    // âœ… ìš”ì²­ ì „ì†¡ í•¨ìˆ˜
    function sendRequest(requestType) {
      if (!patientId) {
        alert("ë“±ë¡ë²ˆí˜¸ê°€ ì—†ìŠµë‹ˆë‹¤. QRì½”ë“œë¥¼ í†µí•´ ì ‘ì†í•´ì£¼ì„¸ìš”.");
        return;
      }

      const data = {
        id: patientId,
        request: requestType,
        time: new Date().toLocaleString("ko-KR")
      };

      fetch(scriptURL, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      alert(`"${requestType}" ìš”ì²­ì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.`);
    }
  </script>
</body>
</html>
